{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"p-8\"\n};\nconst _hoisted_2 = {\n  class: \"flex justify-between items-center mb-8\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"mb-8\"\n};\nconst _hoisted_4 = {\n  class: \"mb-6\"\n};\nconst _hoisted_5 = {\n  class: \"bg-slate-900 rounded-lg overflow-hidden\"\n};\nconst _hoisted_6 = {\n  class: \"w-full\"\n};\nconst _hoisted_7 = {\n  class: \"px-6 py-4 text-slate-100\"\n};\nconst _hoisted_8 = {\n  class: \"px-6 py-4 text-slate-300 truncate\"\n};\nconst _hoisted_9 = {\n  class: \"px-6 py-4\"\n};\nconst _hoisted_10 = {\n  class: \"px-6 py-4 flex gap-2\"\n};\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = {\n  key: 1,\n  class: \"text-center py-12\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createBlock($setup[\"DashboardLayout\"], null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[2] || (_cache[2] = _createElementVNode(\"h1\", {\n      class: \"text-3xl font-bold text-slate-100\"\n    }, \"Tickets\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n      onClick: $setup.toggleForm,\n      class: \"px-6 py-2 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-colors\"\n    }, _toDisplayString($setup.showForm ? 'Cancel' : '+ New Ticket'), 1 /* TEXT */)]), $setup.showForm ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createVNode($setup[\"TicketForm\"], {\n      \"initial-data\": $setup.editingTicket,\n      onSubmit: _cache[0] || (_cache[0] = $event => $setup.editingTicket ? $setup.handleUpdateTicket : $setup.handleAddTicket),\n      onCancel: $setup.cancelForm\n    }, null, 8 /* PROPS */, [\"initial-data\"])])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_4, [_withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.searchTerm = $event),\n      type: \"text\",\n      placeholder: \"Search tickets...\",\n      class: \"w-full px-4 py-2 bg-slate-800 text-slate-100 rounded-lg border border-slate-700 focus:border-blue-500 focus:outline-none\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.searchTerm]])]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"table\", _hoisted_6, [_cache[3] || (_cache[3] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", {\n      class: \"border-b border-slate-700 bg-slate-800\"\n    }, [_createElementVNode(\"th\", {\n      class: \"px-6 py-3 text-left text-sm font-semibold text-slate-300\"\n    }, \"Title\"), _createElementVNode(\"th\", {\n      class: \"px-6 py-3 text-left text-sm font-semibold text-slate-300\"\n    }, \"Description\"), _createElementVNode(\"th\", {\n      class: \"px-6 py-3 text-left text-sm font-semibold text-slate-300\"\n    }, \"Status\"), _createElementVNode(\"th\", {\n      class: \"px-6 py-3 text-left text-sm font-semibold text-slate-300\"\n    }, \"Actions\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.filteredTickets, ticket => {\n      return _openBlock(), _createElementBlock(\"tr\", {\n        key: ticket.id,\n        class: \"border-b border-slate-700 hover:bg-slate-800\"\n      }, [_createElementVNode(\"td\", _hoisted_7, _toDisplayString(ticket.title), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_8, _toDisplayString(ticket.description), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_9, [_createElementVNode(\"span\", {\n        class: _normalizeClass(['px-3 py-1 rounded-full text-xs font-medium', $setup.getStatusColor(ticket.status)])\n      }, _toDisplayString(ticket.status), 3 /* TEXT, CLASS */)]), _createElementVNode(\"td\", _hoisted_10, [_createElementVNode(\"button\", {\n        onClick: $event => $setup.startEdit(ticket),\n        class: \"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm\"\n      }, \" Edit \", 8 /* PROPS */, _hoisted_11), _createElementVNode(\"button\", {\n        onClick: $event => $setup.openDeleteConfirm(ticket.id),\n        class: \"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-sm\"\n      }, \" Delete \", 8 /* PROPS */, _hoisted_12)])]);\n    }), 128 /* KEYED_FRAGMENT */))])])]), $setup.filteredTickets.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [...(_cache[4] || (_cache[4] = [_createElementVNode(\"p\", {\n      class: \"text-slate-400\"\n    }, \"No tickets found\", -1 /* CACHED */)]))])) : _createCommentVNode(\"v-if\", true), _createVNode($setup[\"DeleteConfirmationDialog\"], {\n      \"is-open\": $setup.deleteConfirm.isOpen,\n      \"is-loading\": $setup.isDeleting,\n      onConfirm: $setup.handleConfirmDelete,\n      onCancel: $setup.closeDeleteConfirm\n    }, null, 8 /* PROPS */, [\"is-open\", \"is-loading\"])])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","_createBlock","$setup","_createElementVNode","_hoisted_1","_hoisted_2","onClick","toggleForm","showForm","_createElementBlock","_hoisted_3","_createVNode","editingTicket","onSubmit","_cache","$event","handleUpdateTicket","handleAddTicket","onCancel","cancelForm","_hoisted_4","searchTerm","type","placeholder","_hoisted_5","_hoisted_6","_Fragment","_renderList","filteredTickets","ticket","key","id","_hoisted_7","_toDisplayString","title","_hoisted_8","description","_hoisted_9","_normalizeClass","getStatusColor","status","_hoisted_10","startEdit","_hoisted_11","openDeleteConfirm","_hoisted_12","length","_hoisted_13","deleteConfirm","isOpen","isDeleting","onConfirm","handleConfirmDelete","closeDeleteConfirm"],"sources":["C:\\Users\\Tunmise Babalola\\Desktop\\HNG\\HNG Stage 2 task\\ticketflow-with-vue\\src\\pages\\TicketsPage.vue"],"sourcesContent":["<template>\r\n  <DashboardLayout>\r\n    <div class=\"p-8\">\r\n      <div class=\"flex justify-between items-center mb-8\">\r\n        <h1 class=\"text-3xl font-bold text-slate-100\">Tickets</h1>\r\n        <button\r\n          @click=\"toggleForm\"\r\n          class=\"px-6 py-2 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-colors\"\r\n        >\r\n          {{ showForm ? 'Cancel' : '+ New Ticket' }}\r\n        </button>\r\n      </div>\r\n\r\n      <div v-if=\"showForm\" class=\"mb-8\">\r\n        <TicketForm\r\n          :initial-data=\"editingTicket\"\r\n          @submit=\"editingTicket ? handleUpdateTicket : handleAddTicket\"\r\n          @cancel=\"cancelForm\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"mb-6\">\r\n        <input\r\n          v-model=\"searchTerm\"\r\n          type=\"text\"\r\n          placeholder=\"Search tickets...\"\r\n          class=\"w-full px-4 py-2 bg-slate-800 text-slate-100 rounded-lg border border-slate-700 focus:border-blue-500 focus:outline-none\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"bg-slate-900 rounded-lg overflow-hidden\">\r\n        <table class=\"w-full\">\r\n          <thead>\r\n            <tr class=\"border-b border-slate-700 bg-slate-800\">\r\n              <th class=\"px-6 py-3 text-left text-sm font-semibold text-slate-300\">Title</th>\r\n              <th class=\"px-6 py-3 text-left text-sm font-semibold text-slate-300\">Description</th>\r\n              <th class=\"px-6 py-3 text-left text-sm font-semibold text-slate-300\">Status</th>\r\n              <th class=\"px-6 py-3 text-left text-sm font-semibold text-slate-300\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"ticket in filteredTickets\" :key=\"ticket.id\" class=\"border-b border-slate-700 hover:bg-slate-800\">\r\n              <td class=\"px-6 py-4 text-slate-100\">{{ ticket.title }}</td>\r\n              <td class=\"px-6 py-4 text-slate-300 truncate\">{{ ticket.description }}</td>\r\n              <td class=\"px-6 py-4\">\r\n                <span :class=\"['px-3 py-1 rounded-full text-xs font-medium', getStatusColor(ticket.status)]\">\r\n                  {{ ticket.status }}\r\n                </span>\r\n              </td>\r\n              <td class=\"px-6 py-4 flex gap-2\">\r\n                <button\r\n                  @click=\"startEdit(ticket)\"\r\n                  class=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm\"\r\n                >\r\n                  Edit\r\n                </button>\r\n                <button\r\n                  @click=\"openDeleteConfirm(ticket.id)\"\r\n                  class=\"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-sm\"\r\n                >\r\n                  Delete\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <div v-if=\"filteredTickets.length === 0\" class=\"text-center py-12\">\r\n        <p class=\"text-slate-400\">No tickets found</p>\r\n      </div>\r\n\r\n      <DeleteConfirmationDialog\r\n        :is-open=\"deleteConfirm.isOpen\"\r\n        :is-loading=\"isDeleting\"\r\n        @confirm=\"handleConfirmDelete\"\r\n        @cancel=\"closeDeleteConfirm\"\r\n      />\r\n    </div>\r\n  </DashboardLayout>\r\n</template>\r\n\r\n<script setup lang=\"js\">\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { useToast } from '../composables/useToast'\r\nimport { useErrorHandler } from '../composables/useErrorHandler'\r\nimport DashboardLayout from '../components/DashboardLayout.vue'\r\nimport TicketForm from '../components/TicketForm.vue'\r\nimport DeleteConfirmationDialog from '../components/DeleteConfirmationDialog.vue'\r\n\r\nconst tickets = ref([])\r\nconst searchTerm = ref('')\r\nconst showForm = ref(false)\r\nconst editingTicket = ref(null)\r\nconst isDeleting = ref(false)\r\nconst deleteConfirm = ref({ isOpen: false, ticketId: '' })\r\nconst currentUser = ref({})\r\n\r\nconst { addToast } = useToast()\r\nconst { handleError, handleSessionExpired } = useErrorHandler()\r\n\r\nonMounted(() => {\r\n  const user = localStorage.getItem('currentUser')\r\n  if (!user) {\r\n    handleSessionExpired()\r\n    return\r\n  }\r\n  currentUser.value = JSON.parse(user)\r\n\r\n  const allTickets = JSON.parse(localStorage.getItem('tickets') || '[]')\r\n  tickets.value = allTickets.filter((t) => t.userId === currentUser.value.id)\r\n})\r\n\r\nconst filteredTickets = computed(() =>\r\n  tickets.value.filter(\r\n    t =>\r\n      t.title.toLowerCase().includes(searchTerm.value.toLowerCase()) ||\r\n      t.description.toLowerCase().includes(searchTerm.value.toLowerCase())\r\n  )\r\n)\r\n\r\nconst getStatusColor = (status) => {\r\n  switch (status) {\r\n    case 'open':\r\n      return 'bg-green-900 text-green-200'\r\n    case 'in-progress':\r\n      return 'bg-amber-900 text-amber-200'\r\n    case 'closed':\r\n      return 'bg-slate-700 text-slate-200'\r\n    default:\r\n      return 'bg-slate-700 text-slate-200'\r\n  }\r\n}\r\n\r\nconst toggleForm = () => {\r\n  showForm.value = !showForm.value\r\n  if (!showForm.value) {\r\n    editingTicket.value = null\r\n  }\r\n}\r\n\r\nconst cancelForm = () => {\r\n  showForm.value = false\r\n  editingTicket.value = null\r\n}\r\n\r\nconst startEdit = (ticket) => {\r\n  editingTicket.value = ticket\r\n  showForm.value = true\r\n}\r\n\r\nconst handleAddTicket = (ticketData) => {\r\n  try {\r\n    const newTicket = {\r\n      ...ticketData,\r\n      id: Date.now().toString(),\r\n      createdAt: new Date().toISOString(),\r\n      userId: currentUser.value.id\r\n    }\r\n\r\n    const allTickets = JSON.parse(localStorage.getItem('tickets') || '[]')\r\n    allTickets.push(newTicket)\r\n    localStorage.setItem('tickets', JSON.stringify(allTickets))\r\n\r\n    tickets.value.push(newTicket)\r\n    cancelForm()\r\n    addToast('Ticket created successfully', 'success')\r\n  } catch (error) {\r\n    handleError(error, { showToast: true })\r\n  }\r\n}\r\n\r\nconst handleUpdateTicket = (ticketData) => {\r\n  try {\r\n    if (!editingTicket.value) return\r\n\r\n    const updatedTicket = {\r\n      ...editingTicket.value,\r\n      ...ticketData\r\n    }\r\n\r\n    const allTickets = JSON.parse(localStorage.getItem('tickets') || '[]')\r\n    const index = allTickets.findIndex((t) => t.id === editingTicket.value.id)\r\n\r\n    if (index === -1) throw new Error('Ticket not found')\r\n\r\n    allTickets[index] = updatedTicket\r\n    localStorage.setItem('tickets', JSON.stringify(allTickets))\r\n\r\n    const ticketIndex = tickets.value.findIndex(t => t.id === editingTicket.value.id)\r\n    if (ticketIndex !== -1) {\r\n      tickets.value[ticketIndex] = updatedTicket\r\n    }\r\n\r\n    cancelForm()\r\n    addToast('Ticket updated successfully', 'success')\r\n  } catch (error) {\r\n    handleError(error, { showToast: true })\r\n  }\r\n}\r\n\r\nconst openDeleteConfirm = (ticketId) => {\r\n  deleteConfirm.value = { isOpen: true, ticketId }\r\n}\r\n\r\nconst closeDeleteConfirm = () => {\r\n  deleteConfirm.value = { isOpen: false, ticketId: '' }\r\n}\r\n\r\nconst handleConfirmDelete = async () => {\r\n  if (!deleteConfirm.value.ticketId) return\r\n\r\n  isDeleting.value = true\r\n\r\n  try {\r\n    await new Promise(resolve => setTimeout(resolve, 500))\r\n\r\n    const allTickets = JSON.parse(localStorage.getItem('tickets') || '[]')\r\n    const filtered = allTickets.filter((t) => t.id !== deleteConfirm.value.ticketId)\r\n    localStorage.setItem('tickets', JSON.stringify(filtered))\r\n\r\n    tickets.value = tickets.value.filter(t => t.id !== deleteConfirm.value.ticketId)\r\n    closeDeleteConfirm()\r\n    addToast('Ticket deleted successfully', 'success')\r\n  } catch (error) {\r\n    handleError(error, { showToast: true })\r\n  } finally {\r\n    isDeleting.value = false\r\n  }\r\n}\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}