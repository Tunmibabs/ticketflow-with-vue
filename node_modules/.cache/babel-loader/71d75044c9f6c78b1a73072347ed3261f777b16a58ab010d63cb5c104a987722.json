{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useToast } from '../composables/useToast';\nimport { useErrorHandler } from '../composables/useErrorHandler';\nimport { ERROR_MESSAGES } from '../utils/errorMessages';\nimport Footer from '../components/AppFooter.vue';\nimport AppFooter from '../components/AppFooter.vue';\nexport default {\n  __name: 'LoginPage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const {\n      addToast\n    } = useToast();\n    const {\n      handleError\n    } = useErrorHandler();\n    const email = ref('');\n    const password = ref('');\n    const isLoading = ref(false);\n    const errors = ref({\n      email: '',\n      password: ''\n    });\n    const validateForm = () => {\n      errors.value = {\n        email: '',\n        password: ''\n      };\n      let isValid = true;\n      if (!email.value) {\n        errors.value.email = ERROR_MESSAGES.FORM_EMPTY_EMAIL;\n        isValid = false;\n      } else if (!email.value.includes('@')) {\n        errors.value.email = ERROR_MESSAGES.FORM_INVALID_EMAIL;\n        isValid = false;\n      }\n      if (!password.value) {\n        errors.value.password = ERROR_MESSAGES.FORM_EMPTY_PASSWORD;\n        isValid = false;\n      }\n      return isValid;\n    };\n    const handleLogin = async () => {\n      if (!validateForm()) return;\n      isLoading.value = true;\n      try {\n        const users = JSON.parse(localStorage.getItem('users') || '[]');\n        const user = users.find(u => u.email === email.value && u.password === password.value);\n        if (!user) {\n          throw new Error(ERROR_MESSAGES.AUTH_INVALID_CREDENTIALS);\n        }\n        const token = Date.now().toString();\n        localStorage.setItem('authToken', token);\n        localStorage.setItem('currentUser', JSON.stringify({\n          id: user.id,\n          email: user.email\n        }));\n        addToast('Login successful', 'success');\n        router.push('/dashboard');\n      } catch (error) {\n        handleError(error, {\n          showToast: true\n        });\n      } finally {\n        isLoading.value = false;\n      }\n    };\n    const __returned__ = {\n      router,\n      addToast,\n      handleError,\n      email,\n      password,\n      isLoading,\n      errors,\n      validateForm,\n      handleLogin,\n      ref,\n      get useRouter() {\n        return useRouter;\n      },\n      get useToast() {\n        return useToast;\n      },\n      get useErrorHandler() {\n        return useErrorHandler;\n      },\n      get ERROR_MESSAGES() {\n        return ERROR_MESSAGES;\n      },\n      Footer,\n      AppFooter\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","useRouter","useToast","useErrorHandler","ERROR_MESSAGES","Footer","AppFooter","router","addToast","handleError","email","password","isLoading","errors","validateForm","value","isValid","FORM_EMPTY_EMAIL","includes","FORM_INVALID_EMAIL","FORM_EMPTY_PASSWORD","handleLogin","users","JSON","parse","localStorage","getItem","user","find","u","Error","AUTH_INVALID_CREDENTIALS","token","Date","now","toString","setItem","stringify","id","push","error","showToast"],"sources":["C:/Users/Tunmise Babalola/Desktop/HNG/HNG Stage 2 task/ticketflow-with-vue/src/pages/LoginPage.vue"],"sourcesContent":["<template>\r\n  <div\r\n    class=\"min-h-screen bg-[var(--background)] text-[var(--foreground)] flex flex-col\"\r\n  >\r\n    <div class=\"flex-1 flex items-center justify-center px-6 py-12\">\r\n      <div class=\"w-full max-w-md\">\r\n        <div class=\"text-center mb-8\">\r\n          <h1 class=\"text-3xl font-bold text-[var(--primary)] mb-2\">\r\n            TicketFlow\r\n          </h1>\r\n          <p class=\"text-[var(--muted-foreground)]\">Sign in to your account</p>\r\n        </div>\r\n\r\n        <form @submit.prevent=\"handleLogin\" class=\"space-y-4\">\r\n          <div>\r\n            <label\r\n              class=\"block text-sm font-medium text-[var(--foreground)] mb-2\"\r\n              >Email</label\r\n            >\r\n            <input\r\n              v-model=\"email\"\r\n              type=\"email\"\r\n              class=\"w-full px-4 py-2 bg-[var(--card)] text-[var(--foreground)] rounded-lg border border-[var(--border)] focus:border-[var(--primary)] focus:outline-none\"\r\n              placeholder=\"you@example.com\"\r\n            />\r\n            <p v-if=\"errors.email\" class=\"text-red-500 text-sm mt-1\">\r\n              {{ errors.email }}\r\n            </p>\r\n          </div>\r\n\r\n          <div>\r\n            <label\r\n              class=\"block text-sm font-medium text-[var(--foreground)] mb-2\"\r\n              >Password</label\r\n            >\r\n            <input\r\n              v-model=\"password\"\r\n              type=\"password\"\r\n              class=\"w-full px-4 py-2 bg-[var(--card)] text-[var(--foreground)] rounded-lg border border-[var(--border)] focus:border-[var(--primary)] focus:outline-none\"\r\n              placeholder=\"••••••••\"\r\n            />\r\n            <p v-if=\"errors.password\" class=\"text-red-500 text-sm mt-1\">\r\n              {{ errors.password }}\r\n            </p>\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            :disabled=\"isLoading\"\r\n            class=\"w-full px-4 py-2 bg-[var(--primary)] text-[var(--primary-foreground)] rounded-lg font-semibold hover:opacity-90 transition-opacity disabled:opacity-50\"\r\n          >\r\n            {{ isLoading ? \"Signing in...\" : \"Sign In\" }}\r\n          </button>\r\n        </form>\r\n\r\n        <p class=\"text-center text-[var(--muted-foreground)] mt-6\">\r\n          Don't have an account?\r\n          <router-link\r\n            to=\"/signup\"\r\n            class=\"text-[var(--primary)] hover:underline\"\r\n            >Sign up</router-link\r\n          >\r\n        </p>\r\n      </div>\r\n    </div>\r\n\r\n    <AppFooter />\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"js\">\r\nimport { ref } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useToast } from '../composables/useToast'\r\nimport { useErrorHandler } from '../composables/useErrorHandler'\r\nimport { ERROR_MESSAGES } from '../utils/errorMessages'\r\nimport Footer from '../components/AppFooter.vue'\r\nimport AppFooter from '../components/AppFooter.vue'\r\n\r\nconst router = useRouter()\r\nconst { addToast } = useToast()\r\nconst { handleError } = useErrorHandler()\r\n\r\nconst email = ref('')\r\nconst password = ref('')\r\nconst isLoading = ref(false)\r\nconst errors = ref({ email: '', password: '' })\r\n\r\nconst validateForm = () => {\r\n  errors.value = { email: '', password: '' }\r\n  let isValid = true\r\n\r\n  if (!email.value) {\r\n    errors.value.email = ERROR_MESSAGES.FORM_EMPTY_EMAIL\r\n    isValid = false\r\n  } else if (!email.value.includes('@')) {\r\n    errors.value.email = ERROR_MESSAGES.FORM_INVALID_EMAIL\r\n    isValid = false\r\n  }\r\n\r\n  if (!password.value) {\r\n    errors.value.password = ERROR_MESSAGES.FORM_EMPTY_PASSWORD\r\n    isValid = false\r\n  }\r\n\r\n  return isValid\r\n}\r\n\r\nconst handleLogin = async () => {\r\n  if (!validateForm()) return\r\n\r\n  isLoading.value = true\r\n\r\n  try {\r\n    const users = JSON.parse(localStorage.getItem('users') || '[]')\r\n    const user = users.find((u) => u.email === email.value && u.password === password.value)\r\n\r\n    if (!user) {\r\n      throw new Error(ERROR_MESSAGES.AUTH_INVALID_CREDENTIALS)\r\n    }\r\n\r\n    const token = Date.now().toString()\r\n    localStorage.setItem('authToken', token)\r\n    localStorage.setItem('currentUser', JSON.stringify({ id: user.id, email: user.email }))\r\n\r\n    addToast('Login successful', 'success')\r\n    router.push('/dashboard')\r\n  } catch (error) {\r\n    handleError(error, { showToast: true })\r\n  } finally {\r\n    isLoading.value = false\r\n  }\r\n}\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}